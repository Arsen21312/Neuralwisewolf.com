<!DOCTYPE html>
<html lang="ru">
<head>
  <!-- favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/logowolf.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/logowolf.png">
  <link rel="apple-touch-icon" href="/assets/logowolf.png">

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ASCII Art Generator | Neural Wise Wolf</title>
  <meta name="description" content="–ü—Ä–µ–æ–±—Ä–∞–∑—É–π –∫–∞—Ä—Ç–∏–Ω–∫—É –≤ ASCII –∞—Ä—Ç –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ. –ù–∞—Å—Ç—Ä–æ–π —Å–∏–º–≤–æ–ª—ã, –º–∞—Å—à—Ç–∞–± –∏ –∏–Ω–≤–µ—Ä—Å–∏—é.">
  <base href="/">
  <link rel="stylesheet" href="assets/styles.css">
  <style>
    .tool-header{text-align:center;margin-bottom:1.5rem}
    .tool-header p{max-width:640px;margin:.25rem auto 0;color:var(--text-secondary)}
    .ascii-tool{max-width:980px;margin:0 auto}
    .panel{background:var(--bg-primary);border:1px solid var(--border-light);border-radius:20px;box-shadow:var(--shadow-md);padding:1.25rem;margin-bottom:1rem}
    .controls{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:.75rem;margin-top:.5rem}
    .control{background:var(--bg-secondary);border:1px solid var(--border-light);border-radius:12px;padding:.75rem}
    .control label{display:block;font-weight:700;font-size:.9rem;margin-bottom:.35rem;color:var(--text-primary)}
    .control input[type="range"]{width:100%}
    .row{display:flex;gap:.5rem;align-items:center}
    .mini{padding:.55rem .75rem;border:1px solid var(--border-medium);background:var(--bg-primary);border-radius:10px;cursor:pointer}
    .mini:hover{background:var(--bg-secondary)}
    .ascii-output{background:var(--bg-secondary);border:1px solid var(--border-light);border-radius:16px;padding:1rem;overflow:auto;max-height:70vh}
    .ascii-output pre{margin:0;font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;line-height:1.05;letter-spacing:.6px;font-size:12px;white-space:pre}
    .preview{display:grid;grid-template-columns:1fr 1fr;gap:1rem}
    .preview .box{background:var(--bg-secondary);border:1px solid var(--border-light);border-radius:12px;padding:.5rem;text-align:center}
    .muted{color:var(--text-secondary);font-size:.9rem}
    @media (max-width:900px){.preview{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div data-include="header"></div>
  <div data-include="sidebar"></div>
  <div id="overlay" class="overlay"></div>

  <main class="tool" data-category="fun" data-slug="ascii-art-generator">
    <div class="tool-container">
      <div class="tool-header">
        <h1>ASCII Art Generator</h1>
        <p class="tool-description">–ó–∞–≥—Ä—É–∑–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏ –ø–æ–ª—É—á–∏ ASCII-–∞—Ä—Ç. –£–ø—Ä–∞–≤–ª—è–π —à–∏—Ä–∏–Ω–æ–π, –Ω–∞–±–æ—Ä–æ–º —Å–∏–º–≤–æ–ª–æ–≤, –∫–æ–Ω—Ç—Ä–∞—Å—Ç–æ–º –∏ –∏–Ω–≤–µ—Ä—Å–∏–µ–π.</p>
      </div>

      <div class="ascii-tool">
        <div class="panel">
          <div class="controls">
            <div class="control">
              <label>–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</label>
              <div class="row">
                <input id="file" type="file" accept="image/*" class="mini">
                <button id="demo" class="mini">–¥–µ–º–æ</button>
                <button id="clear" class="mini">–æ—á–∏—Å—Ç–∏—Ç—å</button>
              </div>
              <p class="muted" style="margin:.5rem 0 0">–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è png/jpg/webp. –ù–∏—á–µ–≥–æ –Ω–µ —É—Ö–æ–¥–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä.</p>
            </div>

            <div class="control">
              <label for="width">–®–∏—Ä–∏–Ω–∞ –≤ —Å–∏–º–≤–æ–ª–∞—Ö: <span id="wLabel">120</span></label>
              <input id="width" type="range" min="40" max="240" step="2" value="120">
              <div class="row">
                <button class="mini" data-w="80">80</button>
                <button class="mini" data-w="120">120</button>
                <button class="mini" data-w="160">160</button>
              </div>
            </div>

            <div class="control">
              <label>–ù–∞–±–æ—Ä —Å–∏–º–≤–æ–ª–æ–≤</label>
              <select id="charset" class="mini" style="width:100%">
                <option value="@%#*+=-:. ">–ü–ª–æ—Ç–Ω—ã–π: @%#*+=-:.‚ê†</option>
                <option value="$@B%8&WM#*oahkbdpqwmZO0QLCJUYXzcvunxrjft/|()1{}[]?-_+~<>i!lI;:,^`'. ">–î–µ—Ç–∞–ª—å–Ω—ã–π</option>
                <option value:"#*+=-:. ">&nbsp;–ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–π: #*+=-:.‚ê†</option>
                <option value:"‚ñà‚ñì‚ñí‚ñë .">–ë–ª–æ–∫–∏: ‚ñà‚ñì‚ñí‚ñë‚ê†</option>
              </select>
              <div class="row" style="margin-top:.5rem">
                <label class="row" style="gap:.35rem"><input type="checkbox" id="invert"> –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</label>
                <label class="row" style="gap:.35rem"><input type="checkbox" id="bold"> –∂–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç</label>
              </div>
            </div>

            <div class="control">
              <label for="contrast">–ö–æ–Ω—Ç—Ä–∞—Å—Ç: <span id="cLabel">1.0</span></label>
              <input id="contrast" type="range" min="0.5" max="2" step="0.05" value="1">
              <label for="gamma" style="margin-top:.5rem;display:block">–ì–∞–º–º–∞: <span id="gLabel">1.0</span></label>
              <input id="gamma" type="range" min="0.6" max="2" step="0.05" value="1">
            </div>
          </div>
        </div>

        <div class="preview">
          <div class="box">
            <canvas id="canvas" hidden></canvas>
            <img id="imgPreview" alt="–ü—Ä–µ–≤—å—é" style="max-width:100%;border-radius:10px;display:none">
            <p id="hint" class="muted">–ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ. –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Äî —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–∑ –ø—Ä–∞–≤–æ–≥–æ –±–ª–æ–∫–∞.</p>
          </div>
          <div class="box ascii-output">
            <pre id="out">‚üµ —Å—é–¥–∞ –ø—Ä–∏–ª–µ—Ç–∏—Ç ASCII</pre>
          </div>
        </div>
      </div>

      <div class="tool-features">
        <div class="feature"><h4>üéØ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–æ–º</h4><p>–®–∏—Ä–∏–Ω–∞, –Ω–∞–±–æ—Ä —Å–∏–º–≤–æ–ª–æ–≤, –∫–æ–Ω—Ç—Ä–∞—Å—Ç, –≥–∞–º–º–∞, –∏–Ω–≤–µ—Ä—Å–∏—è.</p></div>
        <div class="feature"><h4>‚ö° –õ–æ–∫–∞–ª—å–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ</h4><p>–ù–∏ –æ–¥–∏–Ω –ø–∏–∫—Å–µ–ª—å –Ω–µ —É—Ö–æ–¥–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä.</p></div>
        <div class="feature"><h4>üìã –£–¥–æ–±–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç</h4><p>–í—ã–¥–µ–ª–∏ –∏ —Å–∫–æ–ø–∏—Ä—É–π. –ñ–∏—Ä–Ω—ã–π —à—Ä–∏—Ñ—Ç —É–ª—É—á—à–∞–µ—Ç —á–∏—Ç–∞–µ–º–æ—Å—Ç—å.</p></div>
      </div>

      <div data-include="related"></div>
    </div>
  </main>

  <div data-include="footer"></div>

  <script src="js/loader.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const file = document.getElementById('file');
      const demo = document.getElementById('demo');
      const clearBtn = document.getElementById('clear');
      const widthRange = document.getElementById('width');
      const wLabel = document.getElementById('wLabel');
      const charsetSel = document.getElementById('charset');
      const invert = document.getElementById('invert');
      const bold = document.getElementById('bold');
      const contrast = document.getElementById('contrast');
      const gamma = document.getElementById('gamma');
      const cLabel = document.getElementById('cLabel');
      const gLabel = document.getElementById('gLabel');

      const canvas = document.getElementById('canvas');
      const ctx = canvas.getContext('2d', { willReadFrequently: true });
      const out = document.getElementById('out');
      const imgPreview = document.getElementById('imgPreview');
      const hint = document.getElementById('hint');

      let img = new Image();

      function updateLabels(){
        wLabel.textContent = widthRange.value;
        cLabel.textContent = Number(contrast.value).toFixed(2);
        gLabel.textContent = Number(gamma.value).toFixed(2);
      }

      function loadFromFile(f){
        const url = URL.createObjectURL(f);
        img.onload = () => { URL.revokeObjectURL(url); render(); };
        img.src = url;
        imgPreview.style.display = 'block';
        hint.style.display = 'none';
      }

      file.addEventListener('change', e => {
        if (e.target.files && e.target.files[0]) loadFromFile(e.target.files[0]);
      });

      demo.addEventListener('click', () => {
        // –ø—Ä–æ—Å—Ç–æ–µ –¥–µ–º–æ: –º–∞–ª–µ–Ω—å–∫–∏–π –≥—Ä–∞–¥–∏–µ–Ω—Ç –≤ dataURL
        const tmp = document.createElement('canvas');
        tmp.width = 256; tmp.height = 128;
        const tctx = tmp.getContext('2d');
        const grd = tctx.createLinearGradient(0,0,256,0);
        grd.addColorStop(0,'#000'); grd.addColorStop(.5,'#777'); grd.addColorStop(1,'#fff');
        tctx.fillStyle = grd; tctx.fillRect(0,0,tmp.width,tmp.height);
        img.onload = render;
        img.src = tmp.toDataURL('image/png');
        imgPreview.style.display = 'block';
        hint.style.display = 'none';
      });

      clearBtn.addEventListener('click', () => {
        out.textContent = '‚üµ —Å—é–¥–∞ –ø—Ä–∏–ª–µ—Ç–∏—Ç ASCII';
        imgPreview.style.display = 'none';
        hint.style.display = 'block';
        img = new Image();
      });

      [widthRange, charsetSel, invert, bold, contrast, gamma].forEach(el => {
        el.addEventListener('input', () => { updateLabels(); if (img.src) render(); });
      });

      document.querySelectorAll('[data-w]').forEach(b=>{
        b.addEventListener('click', ()=>{ widthRange.value=b.dataset.w; updateLabels(); if (img.src) render(); });
      });

      function render(){
        if(!img.width) return;
        updateLabels();
        const targetW = parseInt(widthRange.value,10);
        const aspect = img.height / img.width;
        // –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –¥–ª—è –º–æ–Ω–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞: —Å–∏–º–≤–æ–ª –≤—ã—à–µ —à–∏—Ä–∏–Ω—ã ~ –≤ 1.9 —Ä–∞–∑–∞
        const charAspect = 1.9;
        const targetH = Math.max(1, Math.round(targetW * aspect / charAspect));

        canvas.width = targetW;
        canvas.height = targetH;
        ctx.drawImage(img, 0, 0, targetW, targetH);

        const data = ctx.getImageData(0,0,targetW,targetH).data;
        const chars = (charsetSel.value || "@%#*+=-:. ").split('');
        const inv = invert.checked;
        const con = parseFloat(contrast.value);   // 1 = –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
        const gam = parseFloat(gamma.value);      // 1 = –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

        let rows = '';
        for(let y=0; y<targetH; y++){
          let line = '';
          for(let x=0; x<targetW; x++){
            const i = (y*targetW + x)*4;
            const r = data[i], g = data[i+1], b = data[i+2];
            // —è—Ä–∫–æ—Å—Ç—å (luma)
            let l = 0.2126*r + 0.7152*g + 0.0722*b; // 0..255
            // –∫–æ–Ω—Ç—Ä–∞—Å—Ç –≤–æ–∫—Ä—É–≥ 128
            l = (l-128)*con + 128;
            // –≥–∞–º–º–∞
            l = 255 * Math.pow(Math.min(255,Math.max(0,l))/255, 1/gam);
            const t = l/255; // 0..1
            const idx = Math.floor((inv ? t : 1-t) * (chars.length-1));
            line += chars[idx] || ' ';
          }
          rows += line + '\n';
        }
        out.textContent = rows;
        out.style.fontWeight = bold.checked ? '700' : '400';
        imgPreview.src = img.src;
      }
    });
  </script>
</body>
</html>
