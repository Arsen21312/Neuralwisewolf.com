<!DOCTYPE html>
<html lang="ru">
<head>
  <!-- favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/logowolf.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/logowolf.png">
  <link rel="apple-touch-icon" href="/assets/logowolf.png">

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BMR Calculator | Neural Wise Wolf</title>
  <meta name="description" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä BMR –∏ —Å—É—Ç–æ—á–Ω–æ–π –Ω–æ—Ä–º—ã –∫–∞–ª–æ—Ä–∏–π: Mifflin‚ÄìSt Jeor, Harris‚ÄìBenedict, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ —Ü–µ–ª–∏.">
  <base href="/">
  <link rel="stylesheet" href="assets/styles.css">
  <style>
    .tool-header{ text-align:center; margin-bottom:1.5rem; }
    .tool-header p{ max-width:680px; margin:.3rem auto 0; color:var(--text-secondary); }

    .bmr{ max-width:980px; margin:0 auto; }
    .panel{ background:var(--bg-primary); border:1px solid var(--border-light); border-radius:20px; box-shadow:var(--shadow-md); padding:1.25rem; }
    .grid{ display:grid; gap:.9rem; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); }
    .field{ background:var(--bg-secondary); border:1px solid var(--border-light); border-radius:12px; padding:.8rem; display:flex; flex-direction:column; gap:.5rem; }
    .field label{ font-weight:700; }
    .row{ display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; }
    .text,.select{ width:100%; padding:.65rem .75rem; border:1.5px solid var(--border-medium); border-radius:10px; background:var(--bg-primary); color:var(--text-primary); }
    .text:focus,.select:focus{ outline:none; border-color:var(--accent-primary); box-shadow:0 0 0 3px color-mix(in srgb,var(--accent-primary) 20%,transparent); }
    .mini{ padding:.55rem .75rem; border:1px solid var(--border-medium); background:var(--bg-primary); border-radius:10px; cursor:pointer; }
    .mini:hover{ background:var(--bg-secondary); }
    .check{ display:flex; align-items:center; gap:.5rem; }
    .check input{ width:16px; height:16px; accent-color:var(--accent-primary); }
    .result-cards{ display:grid; gap:.9rem; grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); margin-top:1rem; }
    .card{ background:var(--bg-secondary); border:1px solid var(--border-light); border-radius:16px; padding:1rem; text-align:center; }
    .big{ font-size:1.8rem; font-weight:800; color:var(--accent-primary); margin:0; }
    .muted{ color:var(--text-secondary); font-size:.9rem; }
    .tool-features{ margin-top:28px; padding-top:18px; border-top:1px solid var(--border-light); }
    .tool-features .feature{ margin-bottom:1rem; }
    .unit-badge{ font-size:.85rem; border:1px dashed var(--border-medium); padding:.15rem .5rem; border-radius:999px; }
  </style>
</head>
<body>
  <div data-include="header"></div>
  <div data-include="sidebar"></div>
  <div id="overlay" class="overlay"></div>

  <main class="tool" data-category="life" data-slug="bmr-calculator">
    <div class="tool-container">
      <div class="tool-header">
        <h1>BMR Calculator</h1>
        <p class="tool-description">–°—á–∏—Ç–∞–µ–º –±–∞–∑–æ–≤—ã–π –æ–±–º–µ–Ω (BMR) –∏ –¥–Ω–µ–≤–Ω—ã–µ –∫–∞–ª–æ—Ä–∏–∏ (TDEE) –ø–æ Mifflin‚ÄìSt Jeor –∏–ª–∏ Harris‚ÄìBenedict. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –º–µ—Ç—Ä–∏–∫–∞ –∏ imperial, –∞ —Ç–∞–∫–∂–µ —Ü–µ–ª–∏: –¥–µ—Ñ–∏—Ü–∏—Ç, –±–∞–ª–∞–Ω—Å, –ø—Ä–æ—Ñ–∏—Ü–∏—Ç.</p>
      </div>

      <div class="bmr">
        <div class="panel">
          <div class="grid">
            <div class="field">
              <label>–ü–æ–ª</label>
              <div class="row">
                <select id="sex" class="select">
                  <option value="male">–ú—É–∂—á–∏–Ω–∞</option>
                  <option value="female">–ñ–µ–Ω—â–∏–Ω–∞</option>
                </select>
                <select id="formula" class="select" title="–§–æ—Ä–º—É–ª–∞ BMR">
                  <option value="mifflin">Mifflin‚ÄìSt Jeor</option>
                  <option value="harris">Harris‚ÄìBenedict (–ø–µ—Ä–µ—Å—á—ë—Ç)</option>
                </select>
              </div>
              <div class="row">
                <span class="unit-badge" id="unitBadge">–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è</span>
                <button class="mini" id="toggleUnits">‚áÑ —Å–º–µ–Ω–∏—Ç—å –µ–¥–∏–Ω–∏—Ü—ã</button>
              </div>
            </div>

            <div class="field">
              <label>–í–æ–∑—Ä–∞—Å—Ç</label>
              <input id="age" type="number" class="text" min="10" max="100" value="28">
              <label>–†–æ—Å—Ç (<span id="hUnit">—Å–º</span>)</label>
              <input id="height" type="number" class="text" min="50" max="230" value="175">
            </div>

            <div class="field">
              <label>–í–µ—Å (<span id="wUnit">–∫–≥</span>)</label>
              <input id="weight" type="number" class="text" min="30" max="250" value="70">
              <label>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</label>
              <select id="activity" class="select">
                <option value="1.2">–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è (1.2)</option>
                <option value="1.375">–õ—ë–≥–∫–∞—è, 1‚Äì3 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏/–Ω–µ–¥ (1.375)</option>
                <option value="1.55" selected>–°—Ä–µ–¥–Ω—è—è, 3‚Äì5 —Ç—Ä–µ–Ω./–Ω–µ–¥ (1.55)</option>
                <option value="1.725">–í—ã—Å–æ–∫–∞—è, 6‚Äì7 —Ç—Ä–µ–Ω./–Ω–µ–¥ (1.725)</option>
                <option value="1.9">–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è/—Ñ–∏–∑. —Ç—Ä—É–¥ (1.9)</option>
              </select>
            </div>

            <div class="field">
              <label>–¶–µ–ª—å</label>
              <select id="goal" class="select">
                <option value="deficit10">–î–µ—Ñ–∏—Ü–∏—Ç ~10%</option>
                <option value="deficit20">–î–µ—Ñ–∏—Ü–∏—Ç ~20%</option>
                <option value="maintenance" selected>–ë–∞–ª–∞–Ω—Å (–ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ)</option>
                <option value="surplus10">–ü—Ä–æ—Ñ–∏—Ü–∏—Ç ~10%</option>
                <option value="surplus20">–ü—Ä–æ—Ñ–∏—Ü–∏—Ç ~20%</option>
              </select>
              <label>–ú–∞–∫—Ä–æ—Å—ã (–Ω–∞ –∫–≥ –≤–µ—Å–∞)</label>
              <div class="row">
                <input id="prot" type="number" class="text" value="1.8" step="0.1" style="max-width:110px" title="–±–µ–ª–æ–∫, –≥/–∫–≥">
                <span class="muted">–±–µ–ª–æ–∫ –≥/–∫–≥</span>
              </div>
              <div class="row">
                <input id="fat" type="number" class="text" value="0.9" step="0.1" style="max-width:110px" title="–∂–∏—Ä—ã, –≥/–∫–≥">
                <span class="muted">–∂–∏—Ä—ã –≥/–∫–≥ (—É–≥–ª–µ–≤–æ–¥—ã = –æ—Å—Ç–∞–ª—å–Ω–æ–µ)</span>
              </div>
            </div>
          </div>

          <div class="row" style="justify-content:space-between; margin-top:.6rem;">
            <div class="row">
              <button id="calc" class="mini">—Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
              <button id="reset" class="mini">—Å–±—Ä–æ—Å</button>
            </div>
            <span id="status" class="muted">–ì–æ—Ç–æ–≤–æ</span>
          </div>

          <div class="result-cards">
            <div class="card">
              <p class="big" id="bmrVal">‚Äî</p>
              <div class="muted">BMR, –∫–∫–∞–ª/–¥–µ–Ω—å</div>
            </div>
            <div class="card">
              <p class="big" id="tdeeVal">‚Äî</p>
              <div class="muted">TDEE (–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å), –∫–∫–∞–ª/–¥–µ–Ω—å</div>
            </div>
            <div class="card">
              <p class="big" id="goalVal">‚Äî</p>
              <div class="muted">–ö–∞–ª–æ—Ä–∏–∏ —Å —É—á—ë—Ç–æ–º —Ü–µ–ª–∏</div>
            </div>
            <div class="card" id="macrosCard">
              <p class="big" id="macroVal">‚Äî</p>
              <div class="muted" id="macroDesc">–ë/–ñ/–£, –≥/–¥–µ–Ω—å</div>
            </div>
          </div>
        </div>
      </div>

      <div class="tool-features">
        <div class="feature"><h4>üéØ –¢–æ—á–Ω–æ—Å—Ç—å</h4><p>Mifflin‚ÄìSt Jeor –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ Harris‚ÄìBenedict.</p></div>
        <div class="feature"><h4>‚ö° –£–¥–æ–±—Å—Ç–≤–æ</h4><p>–ú–µ—Ç—Ä–∏–∫–∞/imperial –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Å—á—ë—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ª—é–±–æ–≥–æ –ø–æ–ª—è.</p></div>
        <div class="feature"><h4>üçΩÔ∏è –ú–∞–∫—Ä–æ—Å—ã</h4><p>–ë–µ–ª–æ–∫ –∏ –∂–∏—Ä –∑–∞–¥–∞—é—Ç—Å—è –Ω–∞ –∫–≥, —É–≥–ª–µ–≤–æ–¥—ã ‚Äî –æ—Å—Ç–∞—Ç–æ–∫ –æ—Ç —Ü–µ–ª–µ–≤—ã—Ö –∫–∞–ª–æ—Ä–∏–π.</p></div>
      </div>

      <div data-include="related"></div>
    </div>
  </main>

  <div data-include="footer"></div>

  <script src="js/loader.js"></script>
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const sex = document.getElementById('sex');
    const formula = document.getElementById('formula');
    const age = document.getElementById('age');
    const height = document.getElementById('height');
    const weight = document.getElementById('weight');
    const activity = document.getElementById('activity');
    const goal = document.getElementById('goal');
    const prot = document.getElementById('prot');
    const fat = document.getElementById('fat');

    const unitBadge = document.getElementById('unitBadge');
    const hUnit = document.getElementById('hUnit');
    const wUnit = document.getElementById('wUnit');
    const toggleUnits = document.getElementById('toggleUnits');

    const bmrVal = document.getElementById('bmrVal');
    const tdeeVal = document.getElementById('tdeeVal');
    const goalVal = document.getElementById('goalVal');
    const macroVal = document.getElementById('macroVal');
    const macroDesc = document.getElementById('macroDesc');
    const status = document.getElementById('status');

    let metric = true; // –º–µ—Ç—Ä–∏–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

    function toNumber(el){ return parseFloat(el.value.replace(',', '.')) || 0; }
    function round(x){ return Math.round(x); }

    function toMetricIfNeeded(){
      if(!metric){
        // –¥—é–π–º—ã->—Å–º, —Ñ—É–Ω—Ç—ã->–∫–≥
        const hIn = toNumber(height);
        const wLb = toNumber(weight);
        height.value = (hIn * 2.54).toFixed(1);
        weight.value = (wLb * 0.45359237).toFixed(1);
        metric = true;
        unitBadge.textContent = '–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è';
        hUnit.textContent = '—Å–º';
        wUnit.textContent = '–∫–≥';
      } else {
        // —Å–º->–¥—é–π–º—ã, –∫–≥->—Ñ—É–Ω—Ç—ã
        const hCm = toNumber(height);
        const wKg = toNumber(weight);
        height.value = (hCm / 2.54).toFixed(1);
        weight.value = (wKg / 0.45359237).toFixed(1);
        metric = false;
        unitBadge.textContent = 'imperial';
        hUnit.textContent = 'in';
        wUnit.textContent = 'lb';
      }
      calc();
    }

    toggleUnits.addEventListener('click', toMetricIfNeeded);

    function calcBMR(kg, cm, yrs, isMale, useMifflin){
      if(useMifflin){
        // Mifflin‚ÄìSt Jeor: 10W + 6.25H ‚àí 5A + s  (s = +5 –º—É–∂, ‚àí161 –∂–µ–Ω)
        return 10*kg + 6.25*cm - 5*yrs + (isMale ? 5 : -161);
      } else {
        // Harris‚ÄìBenedict (revised Roza & Shizgal)
        if(isMale) return 88.362 + 13.397*kg + 4.799*cm - 5.677*yrs;
        return 447.593 + 9.247*kg + 3.098*cm - 4.330*yrs;
      }
    }

    function applyGoal(tdee){
      const map = {
        deficit10: 0.90, deficit20: 0.80,
        maintenance: 1.00,
        surplus10: 1.10, surplus20: 1.20
      };
      return tdee * (map[goal.value] || 1);
    }

    function calcMacros(targetKcal, kg, pPerKg, fPerKg){
      const p = Math.max(0, pPerKg) * kg;           // g
      const f = Math.max(0, fPerKg) * kg;           // g
      const kcalPF = p*4 + f*9;
      const remain = Math.max(0, targetKcal - kcalPF);
      const c = remain / 4;                          // g
      return { p: Math.round(p), f: Math.round(f), c: Math.round(c) };
    }

    function calc(){
      const yrs = toNumber(age);
      let cm = toNumber(height);
      let kg = toNumber(weight);

      // –µ—Å–ª–∏ —Å–µ–π—á–∞—Å imperial, –ø–µ—Ä–µ—Å—á—ë—Ç –≤ –º–µ—Ç—Ä–∏–∫—É –¥–ª—è —Å–∞–º–∏—Ö —Ñ–æ—Ä–º—É–ª
      if(!metric){
        cm = cm * 2.54;
        kg = kg * 0.45359237;
      }

      if(kg<=0 || cm<=0 || yrs<=0){ status.textContent = '–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ'; return; }

      const isMale = sex.value === 'male';
      const useMifflin = (formula.value === 'mifflin');

      const bmr = calcBMR(kg, cm, yrs, isMale, useMifflin);
      const tdee = bmr * parseFloat(activity.value);
      const target = applyGoal(tdee);

      const macros = calcMacros(target, kg, toNumber(prot), toNumber(fat));

      bmrVal.textContent = round(bmr).toLocaleString('ru-RU');
      tdeeVal.textContent = round(tdee).toLocaleString('ru-RU');
      goalVal.textContent = round(target).toLocaleString('ru-RU');
      macroVal.textContent = `${macros.p} / ${macros.f} / ${macros.c}`;
      macroDesc.textContent = '–ë–µ–ª–∫–∏ / –ñ–∏—Ä—ã / –£–≥–ª–µ–≤–æ–¥—ã, –≥/–¥–µ–Ω—å';

      status.textContent = (useMifflin ? 'Mifflin‚ÄìSt Jeor' : 'Harris‚ÄìBenedict') + ' ‚Ä¢ ' + (metric ? '–º–µ—Ç—Ä–∏–∫–∞' : 'imperial');
    }

    document.getElementById('calc').addEventListener('click', calc);
    document.getElementById('reset').addEventListener('click', () => {
      sex.value='male'; formula.value='mifflin'; age.value=28; height.value=175; weight.value=70;
      activity.value='1.55'; goal.value='maintenance'; prot.value=1.8; fat.value=0.9;
      if(!metric) toMetricIfNeeded(); else calc();
    });

    [sex, formula, age, height, weight, activity, goal, prot, fat].forEach(el => el.addEventListener('input', calc));

    // URL-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–ø—Ä–∏–º–µ—Ä ?sex=female&age=30&h=165&w=58&act=1.375)
    const q = new URLSearchParams(location.search);
    if(q.has('sex')) sex.value = q.get('sex');
    if(q.has('age')) age.value = q.get('age');
    if(q.has('h')) height.value = q.get('h');
    if(q.has('w')) weight.value = q.get('w');
    if(q.has('act')) activity.value = q.get('act');
    if(q.has('goal')) goal.value = q.get('goal');
    if(q.has('units') && q.get('units')==='imperial') toMetricIfNeeded();

    calc();
  });
  </script>
</body>
</html>
