<!DOCTYPE html>
<html lang="ru">
<head>
    
    <script>
(function () {
  var isGH = location.hostname.endsWith('github.io');
  var repo = isGH ? location.pathname.split('/')[1] : '';
  var href = isGH ? '/' + repo + '/' : '/';
  var b = document.createElement('base');
  b.setAttribute('href', href);
  document.head.prepend(b);
})();
</script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥—Ä–æ–±–µ–π | Neural Wise Wolf</title>
    <meta name="description" content="–û–Ω–ª–∞–π–Ω –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥—Ä–æ–±–µ–π —Å –ø–æ—à–∞–≥–æ–≤—ã–º —Ä–µ—à–µ–Ω–∏–µ–º. –°–ª–æ–∂–µ–Ω–∏–µ, –≤—ã—á–∏—Ç–∞–Ω–∏–µ, —É–º–Ω–æ–∂–µ–Ω–∏–µ, –¥–µ–ª–µ–Ω–∏–µ, —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –¥—Ä–æ–±–µ–π. –†–∞–±–æ—Ç–∞ —Å –æ–±—ã–∫–Ω–æ–≤–µ–Ω–Ω—ã–º–∏ –∏ —Å–º–µ—à–∞–Ω–Ω—ã–º–∏ –¥—Ä–æ–±—è–º–∏.">
    <base href="/Neuralwisewolf.com/">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/logowolf.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/logowolf.png">
    <link rel="apple-touch-icon" href="assets/logowolf.png">
    <link rel="stylesheet" href="assets/styles.css">
    <style>
        .tool-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .tool-header h1 {
            margin-bottom: 0.5rem;
        }
        
        .tool-header p {
            max-width: 600px;
            margin: 0 auto;
            color: var(--text-secondary);
        }
        
        .fraction-calculator {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .calculator-container {
            background: var(--bg-secondary);
            padding: 2rem;
            border-radius: 12px;
            border: 1px solid var(--border-light);
            margin-bottom: 2rem;
        }
        
        .input-section {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 1rem;
            align-items: center;
            margin-bottom: 2rem;
        }
        
        @media (max-width: 768px) {
            .input-section {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .operation-selector {
                margin: 1rem 0;
            }
        }
        
        .fraction-input {
            background: var(--bg-primary);
            border: 2px solid var(--border-light);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
        }
        
        .fraction-input input {
            width: 60px;
            padding: 0.5rem;
            border: 1px solid var(--border-light);
            border-radius: 4px;
            text-align: center;
            font-size: 1.1rem;
            margin: 0 0.25rem;
        }
        
        .fraction-input .fraction-line {
            display: block;
            height: 2px;
            background: var(--text-primary);
            margin: 0.5rem auto;
            width: 80px;
        }
        
        .operation-selector {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.5rem;
        }
        
        .operation-btn {
            padding: 0.75rem;
            border: 2px solid var(--border-light);
            border-radius: 8px;
            background: var(--bg-primary);
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.2s ease;
        }
        
        .operation-btn:hover {
            background: var(--bg-tertiary);
        }
        
        .operation-btn.active {
            background: var(--accent-primary);
            color: white;
            border-color: var(--accent-primary);
        }
        
        .calculate-btn {
            width: 100%;
            padding: 1rem;
            font-size: 1.2rem;
            margin-top: 1rem;
        }
        
        .results-section {
            background: var(--bg-primary);
            padding: 2rem;
            border-radius: 12px;
            border: 1px solid var(--border-light);
        }
        
        .result-display {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .result-fraction {
            font-size: 2rem;
            font-weight: bold;
            margin: 1rem 0;
        }
        
        .result-decimal {
            font-size: 1.2rem;
            color: var(--text-secondary);
        }
        
        .steps-container {
            background: var(--bg-secondary);
            padding: 1.5rem;
            border-radius: 8px;
            border: 1px solid var(--border-light);
        }
        
        .step {
            margin-bottom: 1rem;
            padding: 1rem;
            background: var(--bg-primary);
            border-radius: 6px;
            border-left: 4px solid var(--accent-primary);
        }
        
        .step:last-child {
            margin-bottom: 0;
        }
        
        .step-number {
            font-weight: bold;
            color: var(--accent-primary);
            margin-right: 0.5rem;
        }
        
        .mixed-checkbox {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }
        
        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .example-card {
            background: var(--bg-secondary);
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid var(--border-light);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .example-card:hover {
            background: var(--bg-tertiary);
        }
        
        .fraction-visual {
            display: inline-block;
            text-align: center;
            margin: 0 0.5rem;
        }
        
        .numerator, .denominator {
            padding: 0.2rem 0.5rem;
        }
        
        .fraction-line {
            border-top: 2px solid var(--text-primary);
            margin: 0.2rem 0;
        }
        
        .operation-symbol {
            font-size: 1.5rem;
            margin: 0 1rem;
            vertical-align: middle;
        }
        
        .simplify-btn {
            margin-top: 1rem;
        }
        
        .history-section {
            margin-top: 2rem;
        }
        
        .history-item {
            background: var(--bg-secondary);
            padding: 1rem;
            border-radius: 8px;
            border: 1px solid var(--border-light);
            margin-bottom: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .history-expression {
            font-size: 1.1rem;
        }
        
        .history-result {
            font-weight: bold;
            color: var(--accent-primary);
        }
    </style>
</head>
<body>
    <div data-include="header"></div>
    <div data-include="sidebar"></div>
    <div id="overlay" class="overlay"></div>

    <main class="tool" data-category="math" data-slug="fraction-calculator">
        <div class="tool-container">
            <div class="tool-header">
                <h1>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥—Ä–æ–±–µ–π</h1>
                <p class="tool-description">–û–Ω–ª–∞–π–Ω –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥—Ä–æ–±—è–º–∏. –°–ª–æ–∂–µ–Ω–∏–µ, –≤—ã—á–∏—Ç–∞–Ω–∏–µ, —É–º–Ω–æ–∂–µ–Ω–∏–µ, –¥–µ–ª–µ–Ω–∏–µ –∏ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ –¥—Ä–æ–±–µ–π —Å –ø–æ—à–∞–≥–æ–≤—ã–º —Ä–µ—à–µ–Ω–∏–µ–º</p>
            </div>

            <div class="fraction-calculator">
                <div class="calculator-container">
                    <div class="input-section">
                        <!-- –ü–µ—Ä–≤–∞—è –¥—Ä–æ–±—å -->
                        <div class="fraction-input">
                            <h3>–ü–µ—Ä–≤–∞—è –¥—Ä–æ–±—å</h3>
                            <input type="number" id="num1" placeholder="—á–∏—Å–ª–∏—Ç–µ–ª—å" min="0">
                            <div class="fraction-line"></div>
                            <input type="number" id="den1" placeholder="–∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å" min="1">
                            <div class="mixed-checkbox">
                                <input type="checkbox" id="mixed1">
                                <label for="mixed1">–°–º–µ—à–∞–Ω–Ω–∞—è –¥—Ä–æ–±—å</label>
                            </div>
                            <input type="number" id="whole1" placeholder="—Ü–µ–ª–∞—è —á–∞—Å—Ç—å" min="0" style="display: none; margin-top: 0.5rem;">
                        </div>

                        <!-- –û–ø–µ—Ä–∞—Ü–∏–∏ -->
                        <div class="operation-selector">
                            <button class="operation-btn" data-operation="+">+</button>
                            <button class="operation-btn" data-operation="-">‚àí</button>
                            <button class="operation-btn" data-operation="√ó">√ó</button>
                            <button class="operation-btn" data-operation="√∑">√∑</button>
                        </div>

                        <!-- –í—Ç–æ—Ä–∞—è –¥—Ä–æ–±—å -->
                        <div class="fraction-input">
                            <h3>–í—Ç–æ—Ä–∞—è –¥—Ä–æ–±—å</h3>
                            <input type="number" id="num2" placeholder="—á–∏—Å–ª–∏—Ç–µ–ª—å" min="0">
                            <div class="fraction-line"></div>
                            <input type="number" id="den2" placeholder="–∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å" min="1">
                            <div class="mixed-checkbox">
                                <input type="checkbox" id="mixed2">
                                <label for="mixed2">–°–º–µ—à–∞–Ω–Ω–∞—è –¥—Ä–æ–±—å</label>
                            </div>
                            <input type="number" id="whole2" placeholder="—Ü–µ–ª–∞—è —á–∞—Å—Ç—å" min="0" style="display: none; margin-top: 0.5rem;">
                        </div>
                    </div>

                    <button class="btn btn-primary calculate-btn" onclick="calculate()">
                        üßÆ –í—ã—á–∏—Å–ª–∏—Ç—å
                    </button>

                    <div class="examples-grid">
                        <div class="example-card" onclick="loadExample('1/2 + 1/3')">
                            <div class="fraction-visual">
                                <div class="numerator">1</div>
                                <div class="fraction-line"></div>
                                <div class="denominator">2</div>
                            </div>
                            <span class="operation-symbol">+</span>
                            <div class="fraction-visual">
                                <div class="numerator">1</div>
                                <div class="fraction-line"></div>
                                <div class="denominator">3</div>
                            </div>
                        </div>

                        <div class="example-card" onclick="loadExample('3/4 √ó 2/5')">
                            <div class="fraction-visual">
                                <div class="numerator">3</div>
                                <div class="fraction-line"></div>
                                <div class="denominator">4</div>
                            </div>
                            <span class="operation-symbol">√ó</span>
                            <div class="fraction-visual">
                                <div class="numerator">2</div>
                                <div class="fraction-line"></div>
                                <div class="denominator">5</div>
                            </div>
                        </div>

                        <div class="example-card" onclick="loadExample('2 1/3 - 1 1/2')">
                            <div class="fraction-visual">
                                <span>2</span>
                                <div class="numerator">1</div>
                                <div class="fraction-line"></div>
                                <div class="denominator">3</div>
                            </div>
                            <span class="operation-symbol">‚àí</span>
                            <div class="fraction-visual">
                                <span>1</span>
                                <div class="numerator">1</div>
                                <div class="fraction-line"></div>
                                <div class="denominator">2</div>
                            </div>
                        </div>

                        <div class="example-card" onclick="loadExample('5/6 √∑ 2/3')">
                            <div class="fraction-visual">
                                <div class="numerator">5</div>
                                <div class="fraction-line"></div>
                                <div class="denominator">6</div>
                            </div>
                            <span class="operation-symbol">√∑</span>
                            <div class="fraction-visual">
                                <div class="numerator">2</div>
                                <div class="fraction-line"></div>
                                <div class="denominator">3</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="results-section" id="results-section" style="display: none;">
                    <div class="result-display">
                        <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç</h3>
                        <div class="result-fraction" id="result-fraction"></div>
                        <div class="result-decimal" id="result-decimal"></div>
                        <button class="btn btn-secondary simplify-btn" onclick="simplifyResult()">
                            üîÑ –°–æ–∫—Ä–∞—Ç–∏—Ç—å –¥—Ä–æ–±—å
                        </button>
                    </div>

                    <div class="steps-container" id="steps-container">
                        <h4>üìù –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ</h4>
                        <div id="steps-content"></div>
                    </div>
                </div>

                <div class="history-section" id="history-section" style="display: none;">
                    <h3>üìã –ò—Å—Ç–æ—Ä–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π</h3>
                    <div id="history-content"></div>
                </div>
            </div>

            <!-- SEO –∫–æ–Ω—Ç–µ–Ω—Ç -->
            <div class="article">
                <h2>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥—Ä–æ–±–µ–π - —Ä–µ—à–µ–Ω–∏–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á</h2>
                <p>–ù–∞—à –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥—Ä–æ–±–µ–π –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –≤—ã–ø–æ–ª–Ω—è—Ç—å –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥—Ä–æ–±—è–º–∏: —Å–ª–æ–∂–µ–Ω–∏–µ, –≤—ã—á–∏—Ç–∞–Ω–∏–µ, —É–º–Ω–æ–∂–µ–Ω–∏–µ, –¥–µ–ª–µ–Ω–∏–µ –∏ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ—à–∞–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Å –æ–±—ã–∫–Ω–æ–≤–µ–Ω–Ω—ã–º–∏, —Ç–∞–∫ –∏ —Å–æ —Å–º–µ—à–∞–Ω–Ω—ã–º–∏ –¥—Ä–æ–±—è–º–∏.</p>
                
                <h3>üéØ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞</h3>
                <ul>
                    <li><strong>–°–ª–æ–∂–µ–Ω–∏–µ –∏ –≤—ã—á–∏—Ç–∞–Ω–∏–µ –¥—Ä–æ–±–µ–π</strong> - —Å –æ–±—â–∏–º –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª–µ–º</li>
                    <li><strong>–£–º–Ω–æ–∂–µ–Ω–∏–µ –∏ –¥–µ–ª–µ–Ω–∏–µ –¥—Ä–æ–±–µ–π</strong> - –ø—Ä—è–º–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ</li>
                    <li><strong>–°–º–µ—à–∞–Ω–Ω—ã–µ –¥—Ä–æ–±–∏</strong> - —Ä–∞–±–æ—Ç–∞ —Å —Ü–µ–ª—ã–º–∏ —á–∞—Å—Ç—è–º–∏</li>
                    <li><strong>–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –¥—Ä–æ–±–µ–π</strong> - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–æ—â–µ–Ω–∏–µ</li>
                    <li><strong>–ü–æ—à–∞–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ</strong> - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ</li>
                    <li><strong>–ò—Å—Ç–æ—Ä–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏–π</strong> - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤</li>
                </ul>
                
                <h3>üìö –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è</h3>
                <div class="example-grid">
                    <div class="example">
                        <h4>–û–±—ã–∫–Ω–æ–≤–µ–Ω–Ω–∞—è –¥—Ä–æ–±—å</h4>
                        <p><code>a/b</code> –≥–¥–µ a - —á–∏—Å–ª–∏—Ç–µ–ª—å, b - –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å</p>
                    </div>
                    <div class="example">
                        <h4>–°–º–µ—à–∞–Ω–Ω–∞—è –¥—Ä–æ–±—å</h4>
                        <p><code>c a/b</code> = —Ü–µ–ª–∞—è —á–∞—Å—Ç—å + –¥—Ä–æ–±–Ω–∞—è —á–∞—Å—Ç—å</p>
                    </div>
                    <div class="example">
                        <h4>–ù–û–î</h4>
                        <p>–ù–∞–∏–±–æ–ª—å—à–∏–π –æ–±—â–∏–π –¥–µ–ª–∏—Ç–µ–ª—å –¥–ª—è —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è</p>
                    </div>
                    <div class="example">
                        <h4>–ù–û–ö</h4>
                        <p>–ù–∞–∏–º–µ–Ω—å—à–µ–µ –æ–±—â–µ–µ –∫—Ä–∞—Ç–Ω–æ–µ –¥–ª—è —Å–ª–æ–∂–µ–Ω–∏—è</p>
                    </div>
                </div>
                
                <h3>üßÆ –ü—Ä–∏–º–µ—Ä—ã –≤—ã—á–∏—Å–ª–µ–Ω–∏–π</h3>
                <table>
                    <tr>
                        <th>–û–ø–µ—Ä–∞—Ü–∏—è</th>
                        <th>–ü—Ä–∏–º–µ—Ä</th>
                        <th>–†–µ–∑—É–ª—å—Ç–∞—Ç</th>
                    </tr>
                    <tr>
                        <td>–°–ª–æ–∂–µ–Ω–∏–µ</td>
                        <td>1/2 + 1/3</td>
                        <td>5/6</td>
                    </tr>
                    <tr>
                        <td>–í—ã—á–∏—Ç–∞–Ω–∏–µ</td>
                        <td>3/4 - 1/2</td>
                        <td>1/4</td>
                    </tr>
                    <tr>
                        <td>–£–º–Ω–æ–∂–µ–Ω–∏–µ</td>
                        <td>2/3 √ó 3/4</td>
                        <td>1/2</td>
                    </tr>
                    <tr>
                        <td>–î–µ–ª–µ–Ω–∏–µ</td>
                        <td>5/6 √∑ 2/3</td>
                        <td>5/4 = 1 1/4</td>
                    </tr>
                </table>
                
                <h3>üéì –ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è</h3>
                <ol>
                    <li>–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–∏—Ç–µ–ª—å –∏ –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å –ø–µ—Ä–≤–æ–π –¥—Ä–æ–±–∏</li>
                    <li>–í—ã–±–µ—Ä–∏—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏—é (+, ‚àí, √ó, √∑)</li>
                    <li>–í–≤–µ–¥–∏—Ç–µ –≤—Ç–æ—Ä—É—é –¥—Ä–æ–±—å</li>
                    <li>–ù–∞–∂–º–∏—Ç–µ "–í—ã—á–∏—Å–ª–∏—Ç—å"</li>
                    <li>–ò–∑—É—á–∏—Ç–µ –ø–æ—à–∞–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ</li>
                    <li>–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–æ–∫—Ä–∞—Ç–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç</li>
                </ol>
            </div>
            
            <div data-include="related"></div>
        </div>
    </main>

    <div data-include="footer"></div>
    
    <script src="js/loader.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π
            const operationBtns = document.querySelectorAll('.operation-btn');
            operationBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    operationBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å —Ü–µ–ª—É—é —á–∞—Å—Ç—å –¥–ª—è —Å–º–µ—à–∞–Ω–Ω—ã—Ö –¥—Ä–æ–±–µ–π
            document.getElementById('mixed1').addEventListener('change', function() {
                document.getElementById('whole1').style.display = this.checked ? 'block' : 'none';
            });
            
            document.getElementById('mixed2').addEventListener('change', function() {
                document.getElementById('whole2').style.display = this.checked ? 'block' : 'none';
            });
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø–µ—Ä–≤—É—é –æ–ø–µ—Ä–∞—Ü–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            operationBtns[0].classList.add('active');
        });
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ù–û–î
        function gcd(a, b) {
            return b === 0 ? a : gcd(b, a % b);
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ù–û–ö
        function lcm(a, b) {
            return (a * b) / gcd(a, b);
        }
        
        // –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –¥—Ä–æ–±–∏
        function simplifyFraction(numerator, denominator) {
            if (numerator === 0) return [0, 1];
            
            const divisor = gcd(Math.abs(numerator), Math.abs(denominator));
            return [numerator / divisor, denominator / divisor];
        }
        
        // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ —Å–º–µ—à–∞–Ω–Ω—É—é –¥—Ä–æ–±—å
        function toMixedFraction(numerator, denominator) {
            if (denominator === 0) return null;
            
            const whole = Math.floor(numerator / denominator);
            const newNumerator = numerator % denominator;
            
            if (newNumerator === 0) {
                return { whole: whole, numerator: 0, denominator: 1 };
            }
            
            return { 
                whole: whole, 
                numerator: Math.abs(newNumerator), 
                denominator: Math.abs(denominator) 
            };
        }
        
        // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
        function calculate() {
            try {
                // –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è
                const num1 = parseInt(document.getElementById('num1').value) || 0;
                const den1 = parseInt(document.getElementById('den1').value) || 1;
                const num2 = parseInt(document.getElementById('num2').value) || 0;
                const den2 = parseInt(document.getElementById('den2').value) || 1;
                
                const isMixed1 = document.getElementById('mixed1').checked;
                const isMixed2 = document.getElementById('mixed2').checked;
                const whole1 = parseInt(document.getElementById('whole1').value) || 0;
                const whole2 = parseInt(document.getElementById('whole2').value) || 0;
                
                // –ü–æ–ª—É—á–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é
                const operationBtn = document.querySelector('.operation-btn.active');
                const operation = operationBtn ? operationBtn.dataset.operation : '+';
                
                // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Å–º–µ—à–∞–Ω–Ω—ã–µ –¥—Ä–æ–±–∏ –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
                let actualNum1 = isMixed1 ? whole1 * den1 + num1 : num1;
                let actualNum2 = isMixed2 ? whole2 * den2 + num2 : num2;
                
                // –í–∞–ª–∏–¥–∞—Ü–∏—è
                if (den1 === 0 || den2 === 0) {
                    throw new Error('–ó–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–≤–µ–Ω –Ω—É–ª—é');
                }
                
                if (operation === '√∑' && actualNum2 === 0) {
                    throw new Error('–î–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ');
                }
                
                let resultNumerator, resultDenominator;
                const steps = [];
                
                // –í—ã–ø–æ–ª–Ω—è–µ–º –æ–ø–µ—Ä–∞—Ü–∏—é
                switch (operation) {
                    case '+':
                    case '‚àí':
                        const commonDenominator = lcm(den1, den2);
                        const multiplier1 = commonDenominator / den1;
                        const multiplier2 = commonDenominator / den2;
                        
                        steps.push(`–ù–∞—Ö–æ–¥–∏–º –ù–û–ö –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª–µ–π: –ù–û–ö(${den1}, ${den2}) = ${commonDenominator}`);
                        steps.push(`–ü—Ä–∏–≤–æ–¥–∏–º –∫ –æ–±—â–µ–º—É –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª—é:`);
                        steps.push(`–ü–µ—Ä–≤–∞—è –¥—Ä–æ–±—å: ${actualNum1}/${den1} = ${actualNum1 * multiplier1}/${commonDenominator}`);
                        steps.push(`–í—Ç–æ—Ä–∞—è –¥—Ä–æ–±—å: ${actualNum2}/${den2} = ${actualNum2 * multiplier2}/${commonDenominator}`);
                        
                        if (operation === '+') {
                            resultNumerator = actualNum1 * multiplier1 + actualNum2 * multiplier2;
                            steps.push(`–°–∫–ª–∞–¥—ã–≤–∞–µ–º —á–∏—Å–ª–∏—Ç–µ–ª–∏: ${actualNum1 * multiplier1} + ${actualNum2 * multiplier2} = ${resultNumerator}`);
                        } else {
                            resultNumerator = actualNum1 * multiplier1 - actualNum2 * multiplier2;
                            steps.push(`–í—ã—á–∏—Ç–∞–µ–º —á–∏—Å–ª–∏—Ç–µ–ª–∏: ${actualNum1 * multiplier1} - ${actualNum2 * multiplier2} = ${resultNumerator}`);
                        }
                        resultDenominator = commonDenominator;
                        break;
                        
                    case '√ó':
                        resultNumerator = actualNum1 * actualNum2;
                        resultDenominator = den1 * den2;
                        steps.push(`–£–º–Ω–æ–∂–∞–µ–º —á–∏—Å–ª–∏—Ç–µ–ª–∏: ${actualNum1} √ó ${actualNum2} = ${resultNumerator}`);
                        steps.push(`–£–º–Ω–æ–∂–∞–µ–º –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª–∏: ${den1} √ó ${den2} = ${resultDenominator}`);
                        break;
                        
                    case '√∑':
                        resultNumerator = actualNum1 * den2;
                        resultDenominator = den1 * actualNum2;
                        steps.push(`–î–µ–ª–µ–Ω–∏–µ –∑–∞–º–µ–Ω—è–µ–º —É–º–Ω–æ–∂–µ–Ω–∏–µ–º –Ω–∞ –æ–±—Ä–∞—Ç–Ω—É—é –¥—Ä–æ–±—å:`);
                        steps.push(`${actualNum1}/${den1} √∑ ${actualNum2}/${den2} = ${actualNum1}/${den1} √ó ${den2}/${actualNum2}`);
                        steps.push(`–£–º–Ω–æ–∂–∞–µ–º —á–∏—Å–ª–∏—Ç–µ–ª–∏: ${actualNum1} √ó ${den2} = ${resultNumerator}`);
                        steps.push(`–£–º–Ω–æ–∂–∞–µ–º –∑–Ω–∞–º–µ–Ω–∞—Ç–µ–ª–∏: ${den1} √ó ${actualNum2} = ${resultDenominator}`);
                        break;
                }
                
                steps.push(`–ü–æ–ª—É—á–∞–µ–º –¥—Ä–æ–±—å: ${resultNumerator}/${resultDenominator}`);
                
                // –°–æ–∫—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                const [simplifiedNum, simplifiedDen] = simplifyFraction(resultNumerator, resultDenominator);
                if (simplifiedNum !== resultNumerator || simplifiedDen !== resultDenominator) {
                    steps.push(`–°–æ–∫—Ä–∞—â–∞–µ–º –¥—Ä–æ–±—å: ${resultNumerator}/${resultDenominator} = ${simplifiedNum}/${simplifiedDen}`);
                }
                
                // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —Å–º–µ—à–∞–Ω–Ω—É—é –¥—Ä–æ–±—å –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
                const mixedResult = toMixedFraction(simplifiedNum, simplifiedDen);
                let resultDisplay;
                
                if (mixedResult && mixedResult.whole > 0) {
                    if (mixedResult.numerator === 0) {
                        resultDisplay = mixedResult.whole.toString();
                    } else {
                        resultDisplay = `${mixedResult.whole} ${mixedResult.numerator}/${mixedResult.denominator}`;
                    }
                } else {
                    resultDisplay = `${simplifiedNum}/${simplifiedDen}`;
                }
                
                // –î–µ—Å—è—Ç–∏—á–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
                const decimalResult = (simplifiedNum / simplifiedDen).toFixed(6);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                document.getElementById('result-fraction').textContent = resultDisplay;
                document.getElementById('result-decimal').textContent = `‚âà ${decimalResult}`;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —à–∞–≥–∏
                const stepsContainer = document.getElementById('steps-content');
                stepsContainer.innerHTML = '';
                steps.forEach((step, index) => {
                    const stepDiv = document.createElement('div');
                    stepDiv.className = 'step';
                    stepDiv.innerHTML = `<span class="step-number">${index + 1}.</span> ${step}`;
                    stepsContainer.appendChild(stepDiv);
                });
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –∏—Å—Ç–æ—Ä–∏—é
                addToHistory({
                    expression: `${formatInput(isMixed1, whole1, num1, den1)} ${operation} ${formatInput(isMixed2, whole2, num2, den2)}`,
                    result: resultDisplay,
                    decimal: decimalResult
                });
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
                document.getElementById('results-section').style.display = 'block';
                
            } catch (error) {
                alert('–û—à–∏–±–∫–∞: ' + error.message);
            }
        }
        
        function formatInput(isMixed, whole, num, den) {
            if (isMixed && whole > 0) {
                return `${whole} ${num}/${den}`;
            }
            return `${num}/${den}`;
        }
        
        function addToHistory(calculation) {
            let history = JSON.parse(localStorage.getItem('fractionHistory') || '[]');
            history.unshift(calculation);
            history = history.slice(0, 10); // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ 10 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö
            
            localStorage.setItem('fractionHistory', JSON.stringify(history));
            updateHistoryDisplay();
        }
        
        function updateHistoryDisplay() {
            const history = JSON.parse(localStorage.getItem('fractionHistory') || '[]');
            const historyContent = document.getElementById('history-content');
            
            if (history.length === 0) {
                document.getElementById('history-section').style.display = 'none';
                return;
            }
            
            historyContent.innerHTML = '';
            history.forEach(item => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.innerHTML = `
                    <span class="history-expression">${item.expression}</span>
                    <span class="history-result">= ${item.result}</span>
                `;
                historyContent.appendChild(historyItem);
            });
            
            document.getElementById('history-section').style.display = 'block';
        }
        
        function simplifyResult() {
            const currentFraction = document.getElementById('result-fraction').textContent;
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è
            calculate(); // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
        }
        
        function loadExample(example) {
            // –û—á–∏—â–∞–µ–º –ø–æ–ª—è
            document.getElementById('num1').value = '';
            document.getElementById('den1').value = '';
            document.getElementById('num2').value = '';
            document.getElementById('den2').value = '';
            document.getElementById('mixed1').checked = false;
            document.getElementById('mixed2').checked = false;
            document.getElementById('whole1').style.display = 'none';
            document.getElementById('whole2').style.display = 'none';
            
            // –ü–∞—Ä—Å–∏–º –ø—Ä–∏–º–µ—Ä
            const parts = example.split(' ');
            if (parts.length >= 3) {
                // –ü–µ—Ä–≤–∞—è –¥—Ä–æ–±—å
                const frac1 = parseFraction(parts[0]);
                if (frac1.whole > 0) {
                    document.getElementById('mixed1').checked = true;
                    document.getElementById('whole1').style.display = 'block';
                    document.getElementById('whole1').value = frac1.whole;
                }
                document.getElementById('num1').value = frac1.numerator;
                document.getElementById('den1').value = frac1.denominator;
                
                // –û–ø–µ—Ä–∞—Ü–∏—è
                const operation = parts[1];
                const operationBtns = document.querySelectorAll('.operation-btn');
                operationBtns.forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.textContent === operation) {
                        btn.classList.add('active');
                    }
                });
                
                // –í—Ç–æ—Ä–∞—è –¥—Ä–æ–±—å
                const frac2 = parseFraction(parts[2]);
                if (frac2.whole > 0) {
                    document.getElementById('mixed2').checked = true;
                    document.getElementById('whole2').style.display = 'block';
                    document.getElementById('whole2').value = frac2.whole;
                }
                document.getElementById('num2').value = frac2.numerator;
                document.getElementById('den2').value = frac2.denominator;
                
                calculate();
            }
        }
        
        function parseFraction(str) {
            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Å–º–µ—à–∞–Ω–Ω—ã–µ –¥—Ä–æ–±–∏: "2 1/3"
            if (str.includes(' ')) {
                const parts = str.split(' ');
                const whole = parseInt(parts[0]);
                const fractionParts = parts[1].split('/');
                return {
                    whole: whole,
                    numerator: parseInt(fractionParts[0]),
                    denominator: parseInt(fractionParts[1])
                };
            }
            
            // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ–±—ã–∫–Ω–æ–≤–µ–Ω–Ω—ã–µ –¥—Ä–æ–±–∏: "1/2"
            if (str.includes('/')) {
                const parts = str.split('/');
                return {
                    whole: 0,
                    numerator: parseInt(parts[0]),
                    denominator: parseInt(parts[1])
                };
            }
            
            // –¶–µ–ª–æ–µ —á–∏—Å–ª–æ
            return {
                whole: parseInt(str),
                numerator: 0,
                denominator: 1
            };
        }
        
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        window.calculate = calculate;
        window.simplifyResult = simplifyResult;
        window.loadExample = loadExample;
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
        updateHistoryDisplay();
    </script>
</body>
</html>
